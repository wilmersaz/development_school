<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manejo de Respuestas HTTP</title>
  <link rel="shortcut icon" href="../images/school.png" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(135deg, #059669 0%, #047857 100%);
    }

    @keyframes slideIn {
      from {
        transform: translateX(-100%);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .slide-in {
      animation: slideIn 0.8s ease-out forwards;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in-up {
      animation: fadeInUp 0.8s ease-out forwards;
    }

    .response-flow {
      position: relative;
    }

    .response-flow::before {
      content: '';
      position: absolute;
      left: 20px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: linear-gradient(to bottom, #10b981, #059669);
    }

    .flow-step {
      position: relative;
      margin-left: 40px;
      padding: 1rem;
      margin-bottom: 1rem;
    }

    .flow-step::before {
      content: '';
      position: absolute;
      left: -28px;
      top: 1.5rem;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #10b981;
      border: 3px solid white;
      box-shadow: 0 0 0 2px #10b981;
    }

    .code-snippet {
      background: #1a1a1a;
      border-radius: 8px;
      overflow: hidden;
    }

    .code-header {
      background: #2d2d2d;
      padding: 0.5rem 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.75rem;
      color: #9ca3af;
    }

    .code-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
    }

    .code-content {
      padding: 1rem;
      color: #a3a3a3;
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
      line-height: 1.6;
    }

    .syntax-keyword { color: #c792ea; }
    .syntax-string { color: #c3e88d; }
    .syntax-number { color: #f78c6c; }
    .syntax-comment { color: #546e7a; }
    .syntax-function { color: #82aaff; }
    .syntax-property { color: #ffcb6b; }
    .syntax-error { color: #ff5370; }

    .response-demo {
      border: 2px solid #10b981;
      border-radius: 12px;
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(5, 150, 105, 0.1));
    }

    .status-indicator {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      font-size: 0.75rem;
      font-weight: 600;
      border-radius: 9999px;
      margin-right: 0.5rem;
    }

    .status-2xx { background: #10b981; color: white; }
    .status-3xx { background: #3b82f6; color: white; }
    .status-4xx { background: #f59e0b; color: white; }
    .status-5xx { background: #ef4444; color: white; }

    .json-viewer {
      background: #1f2937;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 1rem;
      font-family: monospace;
      font-size: 0.875rem;
      max-height: 200px;
      overflow-y: auto;
    }

    .json-key { color: #1e40af; font-weight: 600; }
    .json-string { color: #059669; }
    .json-number { color: #dc2626; }
    .json-boolean { color: #7c3aed; }
    .json-null { color: #6b7280; font-style: italic; }
  </style>
</head>

<body class="min-h-screen py-8">

  <!-- Navigation -->
  <nav class="mb-8">
    <div class="max-w-6xl mx-auto px-4 flex flex-col gap-3 sm:flex-row sm:justify-between sm:items-center">
      <a href="peticiones-fetch.html"
        class="bg-white text-green-600 px-4 py-2 rounded-lg hover:bg-green-50 transition-colors w-full sm:w-auto text-center">
        ‚Üê Peticiones con Fetch
      </a>
      <a href="manejo-errores.html"
        class="bg-white text-green-600 px-4 py-2 rounded-lg hover:bg-green-50 transition-colors w-full sm:w-auto text-center">
        Manejo de Errores ‚Üí
      </a>
    </div>
  </nav>

  <div class="max-w-4xl mx-auto px-4">

    <!-- Header -->
    <div class="bg-white rounded-2xl shadow-2xl p-8 mb-8 slide-in">
      <h1 class="text-4xl font-bold text-gray-800 mb-4 pb-1">üì• Manejo de Respuestas HTTP</h1>
      <p class="text-xl text-gray-600">Aprende a procesar y trabajar con las respuestas de las APIs</p>
    </div>

    <!-- El objeto Response -->
    <div class="bg-white rounded-xl shadow-xl overflow-hidden mb-8 fade-in-up">
      <div class="bg-gradient-to-r from-green-600 to-green-700 p-6 text-white">
        <h2 class="text-2xl font-bold">üéØ El Objeto Response</h2>
      </div>
      <div class="p-6">
        <div class="grid md:grid-cols-2 gap-6">
          <div>
            <h3 class="text-xl font-semibold text-gray-800 mb-3">¬øQu√© es Response?</h3>
            <p class="text-gray-600 mb-4">
              El objeto <strong>Response</strong> representa la respuesta de una petici√≥n HTTP. 
              Contiene informaci√≥n sobre el estado, headers y el cuerpo de la respuesta.
            </p>

            <div class="bg-green-50 p-4 rounded-lg">
              <h4 class="font-semibold text-green-800 mb-2">üîç Propiedades principales:</h4>
              <ul class="text-green-700 text-sm space-y-1">
                <li><strong>status:</strong> C√≥digo de estado HTTP (200, 404, 500...)</li>
                <li><strong>statusText:</strong> Texto del estado ("OK", "Not Found"...)</li>
                <li><strong>ok:</strong> true si status es 200-299</li>
                <li><strong>headers:</strong> Headers de la respuesta</li>
                <li><strong>url:</strong> URL final (despu√©s de redirects)</li>
              </ul>
            </div>
          </div>

          <div class="code-snippet">
            <div class="code-header">
              <div class="code-dot bg-red-500"></div>
              <div class="code-dot bg-yellow-500"></div>
              <div class="code-dot bg-green-500"></div>
              <span class="ml-2">response-properties.js</span>
            </div>
            <div class="code-content">
              <span class="syntax-function">fetch</span>(<span class="syntax-string">'/api/users/123'</span>)<br>
              &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;console.<span class="syntax-function">log</span>(<span class="syntax-string">'Status:'</span>, response.<span class="syntax-property">status</span>);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;console.<span class="syntax-function">log</span>(<span class="syntax-string">'OK:'</span>, response.<span class="syntax-property">ok</span>);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;console.<span class="syntax-function">log</span>(<span class="syntax-string">'URL:'</span>, response.<span class="syntax-property">url</span>);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;console.<span class="syntax-function">log</span>(<span class="syntax-string">'Headers:'</span>, response.<span class="syntax-property">headers</span>);<br>
              <br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Verificar si la respuesta es exitosa</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">if</span> (response.<span class="syntax-property">ok</span>) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">return</span> response.<span class="syntax-function">json</span>();<br>
              &nbsp;&nbsp;&nbsp;&nbsp;} <span class="syntax-keyword">else</span> {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">throw new</span> <span class="syntax-function">Error</span>(<span class="syntax-string">'Error HTTP'</span>);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;}<br>
              &nbsp;&nbsp;});
            </div>
          </div>
        </div>

        <!-- Demo Response Properties -->
        <div class="mt-6 response-demo p-4">
          <h4 class="font-semibold text-green-800 mb-3">üß™ Demo: Explorar Response</h4>
          <button id="demoResponse" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition-colors">
            üîç Examinar Response Object
          </button>
          <div id="responseResult" class="mt-4"></div>
        </div>
      </div>
    </div>

    <!-- M√©todos para leer el cuerpo -->
    <div class="bg-white rounded-xl shadow-xl overflow-hidden mb-8 fade-in-up">
      <div class="bg-gradient-to-r from-blue-600 to-blue-700 p-6 text-white">
        <h2 class="text-2xl font-bold">üìñ M√©todos para leer el cuerpo de la respuesta</h2>
      </div>
      <div class="p-6">
        <div class="space-y-6">
          
          <!-- response.json() -->
          <div class="border-l-4 border-blue-500 pl-4 bg-blue-50 p-4 rounded-r-lg">
            <h3 class="text-lg font-bold text-blue-800 mb-2">üîµ response.json()</h3>
            <p class="text-blue-700 text-sm mb-3">
              Parsea el cuerpo de la respuesta como JSON. Es el m√°s com√∫n para APIs REST.
            </p>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div class="code-snippet">
                <div class="code-header">
                  <div class="code-dot bg-red-500"></div>
                  <div class="code-dot bg-yellow-500"></div>
                  <div class="code-dot bg-green-500"></div>
                  <span class="ml-2">json-parsing.js</span>
                </div>
                <div class="code-content">
                  <span class="syntax-function">fetch</span>(<span class="syntax-string">'/api/users'</span>)<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Verificar Content-Type</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">contentType</span> = response.<span class="syntax-property">headers</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span class="syntax-function">get</span>(<span class="syntax-string">'content-type'</span>);<br>
                  <br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">if</span> (contentType?.includes(<span class="syntax-string">'application/json'</span>)) {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">return</span> response.<span class="syntax-function">json</span>();<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;} <span class="syntax-keyword">else</span> {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">throw new</span> <span class="syntax-function">Error</span>(<span class="syntax-string">'No es JSON'</span>);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                  &nbsp;&nbsp;})<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">data</span> => {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;console.<span class="syntax-function">log</span>(data); <span class="syntax-comment">// Objeto JavaScript</span><br>
                  &nbsp;&nbsp;});
                </div>
              </div>

              <div class="bg-blue-100 p-4 rounded">
                <h5 class="font-semibold text-blue-800 mb-2">‚ö†Ô∏è Importante:</h5>
                <ul class="text-blue-700 text-sm space-y-1">
                  <li>‚Ä¢ Solo se puede leer el body una vez</li>
                  <li>‚Ä¢ Devuelve una Promise</li>
                  <li>‚Ä¢ Falla si no es JSON v√°lido</li>
                  <li>‚Ä¢ Verificar Content-Type es buena pr√°ctica</li>
                </ul>
                
                <button id="demoJson" class="mt-3 bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 transition-colors">
                  üìã Probar JSON
                </button>
                <div id="jsonResult" class="mt-2 text-xs"></div>
              </div>
            </div>
          </div>

          <!-- response.text() -->
          <div class="border-l-4 border-green-500 pl-4 bg-green-50 p-4 rounded-r-lg">
            <h3 class="text-lg font-bold text-green-800 mb-2">üü¢ response.text()</h3>
            <p class="text-green-700 text-sm mb-3">
              Lee el cuerpo como texto plano. √ötil para HTML, XML, CSV o texto simple.
            </p>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div class="code-snippet">
                <div class="code-header">
                  <div class="code-dot bg-red-500"></div>
                  <div class="code-dot bg-yellow-500"></div>
                  <div class="code-dot bg-green-500"></div>
                  <span class="ml-2">text-parsing.js</span>
                </div>
                <div class="code-content">
                  <span class="syntax-function">fetch</span>(<span class="syntax-string">'/api/report.csv'</span>)<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => response.<span class="syntax-function">text</span>())<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">csvText</span> => {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Procesar CSV</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">lines</span> = csvText.<span class="syntax-function">split</span>(<span class="syntax-string">'\n'</span>);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">data</span> = lines.<span class="syntax-function">map</span>(<span class="syntax-keyword">line</span> => <br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line.<span class="syntax-function">split</span>(<span class="syntax-string">','</span>)<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;console.<span class="syntax-function">log</span>(data);<br>
                  &nbsp;&nbsp;});<br>
                  <br>
                  <span class="syntax-comment">// Tambi√©n para HTML</span><br>
                  <span class="syntax-function">fetch</span>(<span class="syntax-string">'/template.html'</span>)<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => response.<span class="syntax-function">text</span>())<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">html</span> => {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;document.<span class="syntax-function">getElementById</span>(<span class="syntax-string">'content'</span>)<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.<span class="syntax-property">innerHTML</span> = html;<br>
                  &nbsp;&nbsp;});
                </div>
              </div>

              <div class="bg-green-100 p-4 rounded">
                <h5 class="font-semibold text-green-800 mb-2">üìù Casos de uso:</h5>
                <ul class="text-green-700 text-sm space-y-1">
                  <li>‚Ä¢ Archivos CSV/TSV</li>
                  <li>‚Ä¢ Templates HTML</li>
                  <li>‚Ä¢ Archivos de configuraci√≥n</li>
                  <li>‚Ä¢ APIs que devuelven XML</li>
                  <li>‚Ä¢ Mensajes de error en texto</li>
                </ul>
                
                <button id="demoText" class="mt-3 bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700 transition-colors">
                  üìÑ Probar Text
                </button>
                <div id="textResult" class="mt-2 text-xs"></div>
              </div>
            </div>
          </div>

          <!-- response.blob() -->
          <div class="border-l-4 border-purple-500 pl-4 bg-purple-50 p-4 rounded-r-lg">
            <h3 class="text-lg font-bold text-purple-800 mb-2">üü£ response.blob()</h3>
            <p class="text-purple-700 text-sm mb-3">
              Lee el cuerpo como un Blob (Binary Large Object). Perfecto para archivos binarios.
            </p>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div class="code-snippet">
                <div class="code-header">
                  <div class="code-dot bg-red-500"></div>
                  <div class="code-dot bg-yellow-500"></div>
                  <div class="code-dot bg-green-500"></div>
                  <span class="ml-2">blob-handling.js</span>
                </div>
                <div class="code-content">
                  <span class="syntax-comment">// Descargar una imagen</span><br>
                  <span class="syntax-function">fetch</span>(<span class="syntax-string">'/api/images/photo.jpg'</span>)<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => response.<span class="syntax-function">blob</span>())<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">blob</span> => {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Crear URL temporal</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">imageUrl</span> = <span class="syntax-function">URL</span>.<span class="syntax-function">createObjectURL</span>(blob);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Mostrar en img</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">img</span> = document.<span class="syntax-function">createElement</span>(<span class="syntax-string">'img'</span>);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;img.<span class="syntax-property">src</span> = imageUrl;<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;document.<span class="syntax-property">body</span>.<span class="syntax-function">appendChild</span>(img);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Liberar memoria</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-function">URL</span>.<span class="syntax-function">revokeObjectURL</span>(imageUrl);<br>
                  &nbsp;&nbsp;});<br>
                  <br>
                  <span class="syntax-comment">// Descargar archivo</span><br>
                  <span class="syntax-function">fetch</span>(<span class="syntax-string">'/api/download/report.pdf'</span>)<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => response.<span class="syntax-function">blob</span>())<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">blob</span> => {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">url</span> = <span class="syntax-function">URL</span>.<span class="syntax-function">createObjectURL</span>(blob);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">a</span> = document.<span class="syntax-function">createElement</span>(<span class="syntax-string">'a'</span>);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;a.<span class="syntax-property">href</span> = url;<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;a.<span class="syntax-property">download</span> = <span class="syntax-string">'report.pdf'</span>;<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;a.<span class="syntax-function">click</span>();<br>
                  &nbsp;&nbsp;});
                </div>
              </div>

              <div class="bg-purple-100 p-4 rounded">
                <h5 class="font-semibold text-purple-800 mb-2">üéØ Casos de uso:</h5>
                <ul class="text-purple-700 text-sm space-y-1">
                  <li>‚Ä¢ Im√°genes (JPG, PNG, GIF, SVG)</li>
                  <li>‚Ä¢ Documentos (PDF, DOC, XLS)</li>
                  <li>‚Ä¢ Videos y audio</li>
                  <li>‚Ä¢ Archivos ZIP/RAR</li>
                  <li>‚Ä¢ Cualquier archivo binario</li>
                </ul>
                
                <button id="demoBlob" class="mt-3 bg-purple-600 text-white px-3 py-2 rounded text-sm hover:bg-purple-700 transition-colors">
                  üñºÔ∏è Probar Blob
                </button>
                <div id="blobResult" class="mt-2 text-xs"></div>
              </div>
            </div>
          </div>

          <!-- response.arrayBuffer() -->
          <div class="border-l-4 border-orange-500 pl-4 bg-orange-50 p-4 rounded-r-lg">
            <h3 class="text-lg font-bold text-orange-800 mb-2">üü† response.arrayBuffer()</h3>
            <p class="text-orange-700 text-sm mb-3">
              Lee el cuerpo como ArrayBuffer. Para manipulaci√≥n de bytes de bajo nivel.
            </p>
            
            <div class="grid md:grid-cols-2 gap-4">
              <div class="code-snippet">
                <div class="code-header">
                  <div class="code-dot bg-red-500"></div>
                  <div class="code-dot bg-yellow-500"></div>
                  <div class="code-dot bg-green-500"></div>
                  <span class="ml-2">arraybuffer-usage.js</span>
                </div>
                <div class="code-content">
                  <span class="syntax-comment">// Procesar archivo binario</span><br>
                  <span class="syntax-function">fetch</span>(<span class="syntax-string">'/api/binary-data'</span>)<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => response.<span class="syntax-function">arrayBuffer</span>())<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">buffer</span> => {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Crear vista de bytes</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">view</span> = <span class="syntax-keyword">new</span> <span class="syntax-function">Uint8Array</span>(buffer);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Procesar bytes</span><br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">for</span> (<span class="syntax-keyword">let</span> <span class="syntax-property">i</span> = <span class="syntax-number">0</span>; i < view.<span class="syntax-property">length</span>; i++) {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.<span class="syntax-function">log</span>(<span class="syntax-string">'Byte'</span>, i, <span class="syntax-string">':'</span>, view[i]);<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                  &nbsp;&nbsp;});<br>
                  <br>
                  <span class="syntax-comment">// Web Audio API</span><br>
                  <span class="syntax-function">fetch</span>(<span class="syntax-string">'/audio/sound.mp3'</span>)<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => response.<span class="syntax-function">arrayBuffer</span>())<br>
                  &nbsp;&nbsp;.<span class="syntax-function">then</span>(<span class="syntax-keyword">buffer</span> => {<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">audioCtx</span> = <span class="syntax-keyword">new</span> <span class="syntax-function">AudioContext</span>();<br>
                  &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">return</span> audioCtx.<span class="syntax-function">decodeAudioData</span>(buffer);<br>
                  &nbsp;&nbsp;});
                </div>
              </div>

              <div class="bg-orange-100 p-4 rounded">
                <h5 class="font-semibold text-orange-800 mb-2">üî¨ Casos avanzados:</h5>
                <ul class="text-orange-700 text-sm space-y-1">
                  <li>‚Ä¢ Procesamiento de audio/video</li>
                  <li>‚Ä¢ Manipulaci√≥n de im√°genes</li>
                  <li>‚Ä¢ Criptograf√≠a</li>
                  <li>‚Ä¢ Compresi√≥n/descompresi√≥n</li>
                  <li>‚Ä¢ Protocolos binarios</li>
                </ul>
                
                <div class="mt-3 bg-orange-200 p-2 rounded text-xs">
                  <strong>‚ö†Ô∏è Nota:</strong> Para uso avanzado. La mayor√≠a de casos usan json() o blob()
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>

    <!-- Flujo de procesamiento -->
    <div class="bg-white rounded-xl shadow-xl overflow-hidden mb-8 fade-in-up">
      <div class="bg-gradient-to-r from-indigo-600 to-indigo-700 p-6 text-white">
        <h2 class="text-2xl font-bold">üîÑ Flujo completo de procesamiento</h2>
      </div>
      <div class="p-6">
        <div class="response-flow">
          
          <div class="flow-step bg-indigo-50 rounded-lg">
            <h3 class="font-semibold text-indigo-800 mb-2">1. üì° Recibir Response</h3>
            <p class="text-indigo-700 text-sm mb-2">
              Fetch devuelve una Promise que se resuelve con un objeto Response
            </p>
            <div class="code-snippet">
              <div class="code-content text-xs">
                <span class="syntax-function">fetch</span>(<span class="syntax-string">'/api/data'</span>).<span class="syntax-function">then</span>(<span class="syntax-keyword">response</span> => {
              </div>
            </div>
          </div>

          <div class="flow-step bg-blue-50 rounded-lg">
            <h3 class="font-semibold text-blue-800 mb-2">2. ‚úÖ Verificar Estado</h3>
            <p class="text-blue-700 text-sm mb-2">
              Comprobar si la respuesta fue exitosa antes de procesar
            </p>
            <div class="code-snippet">
              <div class="code-content text-xs">
                &nbsp;&nbsp;<span class="syntax-keyword">if</span> (!response.<span class="syntax-property">ok</span>) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">throw new</span> <span class="syntax-function">Error</span>(<span class="syntax-string">`HTTP ${response.status}`</span>);<br>
                &nbsp;&nbsp;}
              </div>
            </div>
          </div>

          <div class="flow-step bg-green-50 rounded-lg">
            <h3 class="font-semibold text-green-800 mb-2">3. üìÑ Leer Contenido</h3>
            <p class="text-green-700 text-sm mb-2">
              Usar el m√©todo apropiado seg√∫n el tipo de contenido
            </p>
            <div class="code-snippet">
              <div class="code-content text-xs">
                &nbsp;&nbsp;<span class="syntax-keyword">return</span> response.<span class="syntax-function">json</span>(); <span class="syntax-comment">// o .text(), .blob(), etc.</span>
              </div>
            </div>
          </div>

          <div class="flow-step bg-purple-50 rounded-lg">
            <h3 class="font-semibold text-purple-800 mb-2">4. üéØ Procesar Datos</h3>
            <p class="text-purple-700 text-sm mb-2">
              Trabajar con los datos en el siguiente .then()
            </p>
            <div class="code-snippet">
              <div class="code-content text-xs">
                }).<span class="syntax-function">then</span>(<span class="syntax-keyword">data</span> => {<br>
                &nbsp;&nbsp;console.<span class="syntax-function">log</span>(<span class="syntax-string">'Datos recibidos:'</span>, data);<br>
                &nbsp;&nbsp;<span class="syntax-comment">// Actualizar UI, guardar datos, etc.</span><br>
                });
              </div>
            </div>
          </div>

          <div class="flow-step bg-red-50 rounded-lg">
            <h3 class="font-semibold text-red-800 mb-2">5. üö® Manejar Errores</h3>
            <p class="text-red-700 text-sm mb-2">
              Capturar y manejar cualquier error que pueda ocurrir
            </p>
            <div class="code-snippet">
              <div class="code-content text-xs">
                .<span class="syntax-function">catch</span>(<span class="syntax-keyword">error</span> => {<br>
                &nbsp;&nbsp;console.<span class="syntax-function">error</span>(<span class="syntax-string">'Error:'</span>, error);<br>
                &nbsp;&nbsp;<span class="syntax-comment">// Mostrar mensaje al usuario</span><br>
                });
              </div>
            </div>
          </div>

        </div>

        <!-- Ejemplo completo -->
        <div class="mt-8 bg-gray-50 p-6 rounded-lg">
          <h4 class="font-semibold text-gray-800 mb-4">üíª Ejemplo completo con manejo robusto:</h4>
          
          <div class="code-snippet">
            <div class="code-header">
              <div class="code-dot bg-red-500"></div>
              <div class="code-dot bg-yellow-500"></div>
              <div class="code-dot bg-green-500"></div>
              <span class="ml-2">complete-response-handling.js</span>
            </div>
            <div class="code-content">
              <span class="syntax-keyword">async function</span> <span class="syntax-function">fetchUserData</span>(<span class="syntax-property">userId</span>) {<br>
              &nbsp;&nbsp;<span class="syntax-keyword">try</span> {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">response</span> = <span class="syntax-keyword">await</span> <span class="syntax-function">fetch</span>(<span class="syntax-string">`/api/users/${userId}`</span>);<br>
              <br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Verificar tipo de contenido</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">contentType</span> = response.<span class="syntax-property">headers</span>.<span class="syntax-function">get</span>(<span class="syntax-string">'content-type'</span>);<br>
              <br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Manejar diferentes estados HTTP</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">if</span> (response.<span class="syntax-property">status</span> === <span class="syntax-number">404</span>) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">throw new</span> <span class="syntax-function">Error</span>(<span class="syntax-string">'Usuario no encontrado'</span>);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;} <span class="syntax-keyword">else if</span> (response.<span class="syntax-property">status</span> === <span class="syntax-number">401</span>) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">throw new</span> <span class="syntax-function">Error</span>(<span class="syntax-string">'No autorizado'</span>);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;} <span class="syntax-keyword">else if</span> (!response.<span class="syntax-property">ok</span>) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">throw new</span> <span class="syntax-function">Error</span>(<span class="syntax-string">`Error HTTP: ${response.status}`</span>);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;}<br>
              <br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-comment">// Procesar seg√∫n tipo de contenido</span><br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">if</span> (contentType?.includes(<span class="syntax-string">'application/json'</span>)) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">userData</span> = <span class="syntax-keyword">await</span> response.<span class="syntax-function">json</span>();<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">return</span> userData;<br>
              &nbsp;&nbsp;&nbsp;&nbsp;} <span class="syntax-keyword">else</span> {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">const</span> <span class="syntax-property">text</span> = <span class="syntax-keyword">await</span> response.<span class="syntax-function">text</span>();<br>
              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">throw new</span> <span class="syntax-function">Error</span>(<span class="syntax-string">`Respuesta inesperada: ${text}`</span>);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;}<br>
              <br>
              &nbsp;&nbsp;} <span class="syntax-keyword">catch</span> (<span class="syntax-property">error</span>) {<br>
              &nbsp;&nbsp;&nbsp;&nbsp;console.<span class="syntax-function">error</span>(<span class="syntax-string">'Error fetching user:'</span>, error);<br>
              &nbsp;&nbsp;&nbsp;&nbsp;<span class="syntax-keyword">throw</span> error; <span class="syntax-comment">// Re-lanzar para manejo superior</span><br>
              &nbsp;&nbsp;}<br>
              }
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Demo interactivo final -->
    <div class="bg-white response-demo p-6 mb-8 fade-in-up">
      <div class="text-center mb-6">
        <h2 class="text-2xl font-bold text-green-800 mb-2">üéÆ Demo: Tipos de Respuesta</h2>
        <p class="text-green-600">Experimenta con diferentes tipos de contenido</p>
      </div>

      <div class="grid md:grid-cols-2 gap-6">
        <div>
          <h3 class="font-semibold text-green-800 mb-4">Probar diferentes tipos:</h3>
          <div class="space-y-3">
            <button id="testJson" class="w-full bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center">
              <span class="mr-2">üìã</span> JSON Response
            </button>
            <button id="testText" class="w-full bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center">
              <span class="mr-2">üìÑ</span> Text Response
            </button>
            <button id="testImage" class="w-full bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center">
              <span class="mr-2">üñºÔ∏è</span> Image (Blob)
            </button>
            <button id="testError" class="w-full bg-red-600 text-white px-4 py-3 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-center">
              <span class="mr-2">üö®</span> Error Response
            </button>
          </div>
        </div>

        <div>
          <h3 class="font-semibold text-green-800 mb-4">Resultado detallado:</h3>
          <div id="testResult" class="bg-gray-100 p-4 rounded-lg font-mono text-sm h-64 overflow-auto">
            <div class="text-gray-500">Selecciona un tipo de respuesta para ver los detalles...</div>
          </div>
          
          <div id="testStatus" class="mt-3 flex items-center justify-between">
            <div id="statusInfo"></div>
            <div id="responseTime" class="text-sm text-gray-500"></div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Footer Navigation -->
  <footer class="mt-16">
    <div class="max-w-6xl mx-auto px-4">
      <div class="bg-white rounded-xl shadow-xl p-6">
        <div class="flex flex-col gap-3 sm:flex-row sm:justify-between sm:items-center">
          <a href="peticiones-fetch.html"
            class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center w-full sm:w-auto text-center">
            ‚Üê Peticiones con Fetch
          </a>

          <a href="../index.html"
            class="bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors flex items-center justify-center w-full sm:w-auto text-center">
            üè† Men√∫ Principal
          </a>

          <a href="manejo-errores.html"
            class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center w-full sm:w-auto text-center">
            Manejo de Errores ‚Üí
          </a>
        </div>
      </div>
    </div>

    <div class="text-center mt-8">
      <p class="text-white text-lg">
        üìñ Preparado para la clase de <strong>JavaScript - Manejo de Respuestas</strong>
      </p>
      <p class="text-green-100 mt-2">
        CCL ¬© Copyright 2025
      </p>
    </div>
  </footer>

  <script>
    // Funciones auxiliares
    function showDetailedResult(elementId, response, data, processingTime) {
      const element = document.getElementById(elementId);
      const statusInfo = document.getElementById('statusInfo');
      const responseTime = document.getElementById('responseTime');
      
      // Mostrar informaci√≥n del status
      const statusClass = getStatusClass(response.status);
      statusInfo.innerHTML = `<span class="status-indicator ${statusClass}">${response.status} ${response.statusText}</span>`;
      
      // Mostrar tiempo de respuesta
      responseTime.textContent = `‚è±Ô∏è ${processingTime}ms`;
      
      // Mostrar detalles completos
      const result = {
        status: response.status,
        statusText: response.statusText,
        ok: response.ok,
        url: response.url,
        headers: Object.fromEntries(response.headers.entries()),
        data: data
      };
      
      element.innerHTML = `<pre class="json-viewer">${formatJSON(result)}</pre>`;
    }

    function getStatusClass(status) {
      if (status < 300) return 'status-2xx';
      if (status < 400) return 'status-3xx';
      if (status < 500) return 'status-4xx';
      return 'status-5xx';
    }

    function formatJSON(obj, indent = 0) {
      const spaces = '  '.repeat(indent);
      let result = '';
      
      if (typeof obj === 'object' && obj !== null) {
        if (Array.isArray(obj)) {
          result += '[\n';
          obj.forEach((item, index) => {
            result += spaces + '  ' + formatJSON(item, indent + 1);
            if (index < obj.length - 1) result += ',';
            result += '\n';
          });
          result += spaces + ']';
        } else {
          result += '{\n';
          const entries = Object.entries(obj);
          entries.forEach(([key, value], index) => {
            result += spaces + `  <span class="json-key">"${key}"</span>: `;
            result += formatJSON(value, indent + 1);
            if (index < entries.length - 1) result += ',';
            result += '\n';
          });
          result += spaces + '}';
        }
      } else if (typeof obj === 'string') {
        result += `<span class="json-string">"${obj}"</span>`;
      } else if (typeof obj === 'number') {
        result += `<span class="json-number">${obj}</span>`;
      } else if (typeof obj === 'boolean') {
        result += `<span class="json-boolean">${obj}</span>`;
      } else if (obj === null) {
        result += `<span class="json-null">null</span>`;
      } else {
        result += String(obj);
      }
      
      return result;
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', function () {
      const elements = document.querySelectorAll('.fade-in-up');

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.style.opacity = '1';
            entry.target.style.transform = 'translateY(0)';
          }
        });
      });

      elements.forEach(element => {
        observer.observe(element);
      });

      // Demo Response Properties
      document.getElementById('demoResponse').addEventListener('click', function() {
        const responseResult = document.getElementById('responseResult');
        responseResult.innerHTML = '<div class="text-blue-600">üîÑ Examinando response...</div>';
        
        fetch('https://jsonplaceholder.typicode.com/posts/1')
          .then(response => {
            const responseInfo = {
              status: response.status,
              statusText: response.statusText,
              ok: response.ok,
              url: response.url,
              type: response.type,
              redirected: response.redirected,
              headers: {
                'content-type': response.headers.get('content-type'),
                'content-length': response.headers.get('content-length'),
                'cache-control': response.headers.get('cache-control')
              }
            };
            
            responseResult.innerHTML = `
              <div class="bg-green-50 p-4 rounded border border-green-200">
                <h5 class="font-semibold text-green-800 mb-2">‚úÖ Response Object:</h5>
                <pre class="text-xs text-green-700 bg-green-100 p-2 rounded overflow-x-auto">${JSON.stringify(responseInfo, null, 2)}</pre>
              </div>
            `;
            
            return response.json();
          })
          .catch(error => {
            responseResult.innerHTML = `
              <div class="bg-red-50 p-4 rounded border border-red-200">
                <h5 class="font-semibold text-red-800">‚ùå Error:</h5>
                <p class="text-sm text-red-700">${error.message}</p>
              </div>
            `;
          });
      });


        // fetch('https://jsonplaceholder.typicode.com/posts/1')
        //   .then(response => {
        //     const responseInfo = {
        //       status: response.status,
        //       statusText: response.statusText,
        //       ok: response.ok,
        //       url: response.url,
        //       type: response.type,
        //       redirected: response.redirected,
        //       headers: {
        //         'content-type': response.headers.get('content-type'),
        //         'content-length': response.headers.get('content-length'),
        //         'cache-control': response.headers.get('cache-control')
        //       }
        //     };
        //     console.log('Response Info:', responseInfo);
        //   })
        //   .catch(error => console.error(error.message));

      // Demos individuales simples
      document.getElementById('demoJson').addEventListener('click', function() {
        const resultDiv = document.getElementById('jsonResult');
        resultDiv.innerHTML = '<div class="text-blue-600">üîÑ Parseando JSON...</div>';
        
        fetch('https://jsonplaceholder.typicode.com/users/1')
          .then(response => {
            const contentType = response.headers.get('content-type');
            if (contentType?.includes('application/json')) {
              return response.json();
            } else {
              throw new Error('No es JSON v√°lido');
            }
          })
          .then(user => {
            resultDiv.innerHTML = `
              <div class="bg-blue-50 p-2 rounded border border-blue-200">
                <div class="text-blue-800 font-semibold text-xs">‚úÖ JSON parseado:</div>
                <div class="text-blue-700 text-xs">${user.name} (${user.email})</div>
              </div>
            `;
          })
          .catch(error => {
            resultDiv.innerHTML = `
              <div class="bg-red-50 p-2 rounded border border-red-200">
                <div class="text-red-800 font-semibold text-xs">‚ùå Error:</div>
                <div class="text-red-700 text-xs">${error.message}</div>
              </div>
            `;
          });
      });

        // fetch('https://jsonplaceholder.typicode.com/users/1')
        //   .then(response => {
        //     const contentType = response.headers.get('content-type');
        //     if (contentType?.includes('application/json')) {
        //       return response.json();
        //     } else {
        //       throw new Error('No es JSON v√°lido');
        //     }
        //   })
        //   .then(user => {
        //     console.log(`nombre del usuario ${user.name} (${user.email})`);
        //   })
        //   .catch(error => {console.error(error.message);
        //   });

      document.getElementById('demoText').addEventListener('click', function() {
        const resultDiv = document.getElementById('textResult');
        resultDiv.innerHTML = '<div class="text-green-600">üîÑ Obteniendo texto...</div>';
        
        // Simular respuesta de texto
        fetch('https://httpbin.org/html')
          .then(response => response.text())
          .then(html => {
            const preview = html.substring(0, 100) + '...';
            resultDiv.innerHTML = `
              <div class="bg-green-50 p-2 rounded border border-green-200">
                <div class="text-green-800 font-semibold text-xs">‚úÖ HTML obtenido:</div>
                <div class="text-green-700 text-xs">${preview}</div>
              </div>
            `;
          })
          .catch(error => {
            resultDiv.innerHTML = `
              <div class="bg-red-50 p-2 rounded border border-red-200">
                <div class="text-red-800 font-semibold text-xs">‚ùå Error:</div>
                <div class="text-red-700 text-xs">${error.message}</div>
              </div>
            `;
          });
      });

      document.getElementById('demoBlob').addEventListener('click', function() {
        const resultDiv = document.getElementById('blobResult');
        resultDiv.innerHTML = '<div class="text-purple-600">üîÑ Descargando imagen...</div>';
        
        fetch('https://httpbin.org/image/png')
          .then(response => response.blob())
          .then(blob => {
            const url = URL.createObjectURL(blob);
            resultDiv.innerHTML = `
              <div class="bg-purple-50 p-2 rounded border border-purple-200">
                <div class="text-purple-800 font-semibold text-xs">‚úÖ Imagen como Blob:</div>
                <div class="text-purple-700 text-xs">Tama√±o: ${blob.size} bytes</div>
                <img src="${url}" alt="Demo image" class="mt-1 max-w-20 h-auto rounded">
              </div>
            `;
            
            // Liberar memoria despu√©s de 5 segundos
            setTimeout(() => URL.revokeObjectURL(url), 5000);
          })
          .catch(error => {
            resultDiv.innerHTML = `
              <div class="bg-red-50 p-2 rounded border border-red-200">
                <div class="text-red-800 font-semibold text-xs">‚ùå Error:</div>
                <div class="text-red-700 text-xs">${error.message}</div>
              </div>
            `;
          });
      });

        // fetch('https://httpbin.org/image/png')
        //   .then(response => response.blob())
        //   .then(blob => {
        //     const url = URL.createObjectURL(blob);
        //     console.log(`Tama√±o: ${blob.size} bytes`);
        //     console.log(`URL: ${url}`);

        //     // Liberar memoria despu√©s de 5 segundos
        //     setTimeout(() => URL.revokeObjectURL(url), 5000);
        //   })
        //   .catch(error => {
        //     console.error(error.message);
        //   });

      // Demo completo con diferentes tipos
      document.getElementById('testJson').addEventListener('click', function() {
        const startTime = Date.now();
        
        fetch('https://jsonplaceholder.typicode.com/posts/1')
          .then(response => {
            const processingTime = Date.now() - startTime;
            return Promise.all([response, response.json(), processingTime]);
          })
          .then(([response, data, processingTime]) => {
            showDetailedResult('testResult', response, data, processingTime);
          })
          .catch(error => {
            document.getElementById('testResult').innerHTML = `<div class="text-red-600">Error: ${error.message}</div>`;
          });
      });

        // fetch('https://jsonplaceholder.typicode.com/posts/1')
        //   .then(response => {
        //     const startTime = Date.now();
        //     const processingTime = Date.now() - startTime;
        //     return Promise.all([response, response.json(), processingTime]);
        //   })
        //   .then(([response, data, processingTime]) => {
        //     console.log('Response:', response);
        //     console.log('Data:', data);
        //     console.log(`Processing time: ${processingTime}ms`);
        //   })
        //   .catch(error => {console.error('Error:', error.message)});

      document.getElementById('testText').addEventListener('click', function() {
        const startTime = Date.now();
        
        fetch('https://httpbin.org/html')
          .then(response => {
            const processingTime = Date.now() - startTime;
            return Promise.all([response, response.text(), processingTime]);
          })
          .then(([response, data, processingTime]) => {
            // Truncar HTML para mostrar
            const truncatedData = data.length > 500 ? data.substring(0, 500) + '...' : data;
            showDetailedResult('testResult', response, truncatedData, processingTime);
          })
          .catch(error => {
            document.getElementById('testResult').innerHTML = `<div class="text-red-600">Error: ${error.message}</div>`;
          });
      });

      document.getElementById('testImage').addEventListener('click', function() {
        const startTime = Date.now();
        
        fetch('https://httpbin.org/image/jpeg')
          .then(response => {
            const processingTime = Date.now() - startTime;
            return Promise.all([response, response.blob(), processingTime]);
          })
          .then(([response, blob, processingTime]) => {
            const blobInfo = {
              size: blob.size,
              type: blob.type,
              lastModified: blob.lastModified || 'N/A'
            };
            showDetailedResult('testResult', response, blobInfo, processingTime);
          })
          .catch(error => {
            document.getElementById('testResult').innerHTML = `<div class="text-red-600">Error: ${error.message}</div>`;
          });
      });

      document.getElementById('testError').addEventListener('click', function() {
        const startTime = Date.now();
        
        fetch('https://httpbin.org/status/404')
          .then(response => {
            const processingTime = Date.now() - startTime;
            return Promise.all([response, response.text(), processingTime]);
          })
          .then(([response, data, processingTime]) => {
            showDetailedResult('testResult', response, data || 'Empty response body', processingTime);
          })
          .catch(error => {
            document.getElementById('testResult').innerHTML = `<div class="text-red-600">Error: ${error.message}</div>`;
          });
      });
    });
  </script>

</body>

</html>
